# 哈希表


#### 引子
以字典为例
- 当你要在英语词典中查找"ziawang"的时候，你首先想到的是查找"z"对应的范围，然后再按照字母顺序找到"i"这样你就得到了"zi"开头的单词，按照这个算法逻辑继续往下找最终能锁定单词"ziawang"在字典中的位置。**从索引页中查找到单词"ziawang"所在页码的逻辑就可以看作是一个`哈希函数`，而"ziawang"这个值存放在字典这个`有序数组`中**

#### 哈希表是什么鬼？
- 哈希表其实就是一个线性表的存储结构，它是由`哈希函数`和`一个顺序表(数组)`组成。
- 哈希函数将要查找的value作为参数输入，输出的结果就是value在顺序表中存储的位置(下标)。
	- 在上面的例子中，如果把"根据字母顺序从索引页中得到ziwang单词页码"的逻辑封装成一个函数，那么这个函数就可以看作一个`哈希函数`，该函数返回的结果就是单词在词典这个顺序表中的位置


#### 举一个简单的例子
以除法哈希为例
- 哈希函数为如下

```python
def my_hash(value):
	"""	简单的触发哈希函数，以余数作为value存放在数组中的位置
	Args: 
		value: 要存储的值
	"""

	_, index = divmod(value, 5)
	return index
```

- 现在有一个集合和长度为5的数组，集合中的元素分别为`0, 3, 4`，那么按照上面的简单哈希函数，将集合中的值出入，得到的结果存放到数组中，得到的数组最终存储状态是这样
	- `[0, None, None, 3, 4]`


#### 哈希冲突
- 还是用上面的例子，假设现在要存放的集合元素为`0, 3, 4, 5`，当按照这个简单的hash函数进行存储值的时候，就会发现`值0`和`值5`得到的位置是一样的，都是数组中索引为0的位置。这是因为**hash表的大小总是有限的，但是要通过hash函数处理并保存到hash表中的数据是无限的，对于任何一个哈希函数，总会出现两个或者多个不同的值映射到相同的位置上**


#### 解决哈希冲突
拉链法
- 把哈希表的每一个位置都连接上一个链表，当发生哈希冲突的时候，将发生冲突的值添加到列表的尾部

开放寻址法
- 当发生哈希冲突的时候，向后探查新的位置来存储这个值，向后探查也会对应一个函数，常用的如下：
	- 先行探查：如果位置i被占用，则探查i+1, i+2,……
	- 二次探查：如果位置i被占用，则探查i+1^2,i-1^2,i+2^2,i-2^2,……
	- 二度哈希：有n个哈希函数，当使用第1个哈希函数h1发生冲突时，则尝试使用h2,h3,……

#### python中hash表的使用
- python中的字典和集合都是使用哈希表来存储元素，以字典为例：
	- `{"name": "ziawang", "age": 18, "city": "Beijing"}`，假设通过hash函数的得到`name`对应`0`， `age`对应`3`， `city`对应`4`。那么对应的哈希表存储就应该是这样（假设数组长度为5）：`["ziawang", None, None, 18, "Beijing"]`

- 时间复杂度为`O(1)`


