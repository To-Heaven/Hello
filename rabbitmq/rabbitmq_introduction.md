# rabbitmq介绍与基本使用

## 原理和介绍
#### rabbitMQ是什么鬼？
- RabbitMQ是一种消息队列，所谓消息队列，其实就是一种多个进程（程序）之间进行通信的工具/方式，类似生产者消费者模式，发送方只管将数据放到消息队列中，接收方只负责从消息队列中取出数据。

#### rabbitMQ有什么特点？
1. 它是一种异步协作机制，这种机制和以提高服务端的响应效率
	- 所谓异步，就是指发送方只管将数据放到消息队列之后，不会等待到接收方接收到消息之后才发送下一个数据，同理接收方只管从消息队列中取出数据。
	- 所谓协作，就是指发送方可以连续发送多个数据给接收方，**接收方可以有多个，当每一个接收方接受到消息队列中的数据之后，就会根据该数据执行不同的任务，从而实现多个任务在多个进程之间协作同时进行**
2. 他可以明显的缩短服务端返回响应给客户端的时间

3. 实现发送端与接收端之间的解耦，发送端不需要知道另一端接受信息的接收方到达是谁，同理接收方也不需要知道是谁将这个信息放到消息队列中的，**发送方和接收方只需要关注消息队列中的数据即可**
4. 灵活习惯非常高，发送方和接收方可以是不同语言写成的程序。

#### 为什么要使用rabbitMQ？
这个举例子的话很容易理解，假设现在用户来注册我们的网站：
1. 用户填写完表单数据，点击立即注册之后，这些数据通过POST请求发送到后台，后台可能要干下面这几件事：
	1. 对用户提交的数据进行校验，一方面避免XSS攻击，另一方面满足存放到数据的要求
	2. 用户数据校验通过之后，将数据保存到数据库
	3. 根据用户用户提交的信息分析用户的爱好，为用户推送一些相关的文章
	4. 发送一条邮件给用户的邮箱，用于验证和绑定
	5. 发送一条信息给用户的手机，用户绑定和验证
	6. 向用户推荐一些志同道合的朋友或者加用户推荐给其他人
2. 如果在用户点击立即注册之后，在一次POST请求中处理完上面的6个任务，那么用户可能需要等待非常久的时间才能接收到服务端的响应，**实际上在用户提交的数据保存到数据库之后我们就可以将用户页面重定向到其个人页面了，对于剩下的四个任务，完全可以放到消息队列中，消息队列的接收方进程可以有多个，他们收到消息队列中的消息之后就会执行对应的任务**；还有一种情况就是当同时注册用户非常多，高并发状态下用户提校验数据，数据保存到数据库之后，在执行剩下几个任务的时候，可能会出现异常，导致用户注册成功之后也无法进入个人主页，因此我们需要将任务拆分开来，将不需要在请求中立即执行的任务放到消息队列中。
3. 也就是说我们可以将这些任务分成主线任务和非主线任务，验证用户POST提交的数据和将数据保存到数据库就是主线任务，其它任务就是非主线任务，对于非主线任务，我们可以将他们放到消息队列中交给其它进程去处理，同时**很快的完成注册功能。**




#### 何时在项目中使用rabbitMQ？
- 在项目中没有必要刻意的去寻找消息队列的使用场景，而是当服务端出现性能瓶颈的时候，去查看业务逻辑中是否存在可以异步处理的耗时操作，如果存在的话，就可以引入消息队列来解决。**否则盲目使用消息队列可能会增加代码的维护和开发成本却没有任何性能上的改进，显得得不偿失**




#### rabbitMQ与zeroMQ
1. zeroMQ的速度要比rabbitMQ块，因为zeroMQ是基于内存的


#### rabbitMQ与生产者消费者中使用的queue
- 生产和消费不再针对内存里的一个Queue对象，而是某台服务器上的RabbitMQ Server实现的消息队列。


## 安装和使用




























