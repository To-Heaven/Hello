# 负载均衡

#### 负载均衡是什么鬼?
- 构建一个大型网站的时候，公司后端服务器的硬件配置和网络配置很可能是不相同的，这就会使得不同服务器的性能之间有较大差异。因此当大量请求访问该网站的时候，应该根据每一台服务器的实际性能情况来分配所能处理的请求数量，避免性能较差的服务器出现“过载”的情况。
- 上面吧啦了那么多，其实就是一句话，负载均衡就是通过在多个服务器（集群）、网络连接、CPU或其他资源中合理分配负载，已达到最优化资源使用、最大化服务器吞吐率、最小化服务器响应时间以及避免服务器过载的目的

#### 如何实现负载均衡
- 负载均衡的实现通常是由专用的软件和硬件来完成。


#### 负载均衡的应用
1. Web网站，比如淘宝
2. 高流量的下载网站，比如草榴社区
3. 数据库服务，比如MySQL

###### 注意
- 对于互联网服务而言，实现负载平衡功能的通常是一个软件程序，负载平衡器会监听一个外部端口，互联网用户向服务端发送的请求会首先由负载平衡器接收，然后负载平衡器将客户端请求转发给服务端，服务端处理完该请求并返回响应给负责负载均衡的软件，然后该软件将响应转发给客户端。
- 负负载平衡器只提供访问端口给用户，这样就隐藏了服务器内部的网络结构，防止用户请求直接进入服务器内部网络，保证了服务器的安全。
- 当后端服务器出现故障的时候，负载均衡器会提供一些特殊功能处理这个情况。比如把客户端发送的请求转发给备用负载平衡器。

#### 负载平衡器特性
###### 1. 不对称负载调节
- 负载平衡器根据每一台后台服务器的状态设置不同的权重，通过权重来控制服务器的负载（请求处理量），当后台服务器的性能不是等同的时候，这是一种控制服务器负载的简单方法

###### 2. 优先引导
- 当服务器过载或者故障过多时，备用服务器可以及时上线代替该服务器提供服务

###### 3. http压缩
- 对于响应时间过长或者传输距离比较远的用户，可以使用gzip压缩HTTP数据，这样会消耗负载平衡器的CPU，这个过程其实可以在Web服务端完成。


###### 4. 优先队列
- 即流量控制，对不同的内容设置不同的优先级


###### 5. 内容感知开关
- 基于用户请求的URL发送请求到不同的后台服务器

###### 6. 防火墙与入侵阻止 
