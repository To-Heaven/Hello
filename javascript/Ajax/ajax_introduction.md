# Ajax

#### 传统web请求的缺点
- 在传统的Web请求中，客户端每像服务器发送一次请求，当接收到服务端的响应时，就会刷新一次**整个页面**，在客户端当前页面与服务端返回的页面之间往往存在大部分重复的数据信息，比如在登录页面，当我们用户名或密码错误的时候，服务端就会返回一个相同的页面并附带上错误信息，这就明显**浪费的带宽和服务器端的性能**。理想的情况应该是，客户端将form表单中的登陆信息封装到请求中发送给服务端之后，服务端验证用户后仅将错误信息返回给客户端，这样，页面中只需要局部刷新就可以实现想用的效果


#### ajax 是什么？
- Ajax是一种支持异步请求的技术，最早传输数据主要使用的是XML，因此Ajax又叫异步的JavaScript和xml。其实发展到现在，特别是json数据格式出现之后，作为一种轻巧的数据格式，json广泛应用于各种web开发中的网络数据传输，因此也有Ajaj一说。

#### 为什么要使用Ajax？
 这个问题使用例子来回答再合适不过
- 假设现在我们写一个类似网易邮箱这种登陆页面（登陆页面除了form表单之外还有其他的东西），用户想刷新一下验证码，这个时候
    - 如果使用的是同步请求，浏览器就会在接收到响应之后**刷新整个页面**，同时**用户之前填写的用户名和密码都需要重新填写**，这带来的用户体验度是极差的
    - 但是如果使用的是Ajax异步提交请求，那么服务端在接收到这个请求之后只需要生成一个新的验证码，以json数据的形式返回，前端Ajax的通过回调函数对这个包含验证码的数据进行处理，并渲染到页面上，**根本不会刷新页面**，并且**降低了传输过程中的流量**
- 还有一个原因就是，在**前后端分离的项目**中，通常会使用Ajax从后端获取数据，后端只管返回前端想要的数据结构和数据即可，这与传统的mcv
架构相比极大的减轻了服务端渲染模板的性能压力


#### Ajax特点
- 最最显著的特点：**可以在不刷新整个页面的情况下实现页面的局部刷新**，他可以带来两个优点，一个就是提高用户的体验，另一个就是避免重复
数据传递

###### 异步请求与同步请求
- 同步交互： 客户端向服务端发送一个请求之后，会阻塞知道服务端返回一个响应，才能发送下一个请求
- 异步交互：客户端向服务端发送一个请求之后，不会阻塞知道服务端返回的响应，阻塞期间可以继续发送其他请求
	- 应用： 局部刷新




###### 浏览器端实现异步请求原理
- 
- 客户端仅仅向服务端发送和接受**必须的数据**，并在服务端对接收的数据使用JavaScript来处理，这样将很多处理的工作转移到的客户端机器上去运行，大大减少了Web服务端的压力

###### 优点
- 在不更新整个客户端页面的情况下刷新页面数据
- 减少了服务端与客户端之间交换的重复数据
- 降低了服务端的性能压力

###### 缺点
- 会**破坏浏览器的后退和添加到书签的功能**
	- 浏览器只能在历史纪录中记录下前一个静态页面的内容，导致在动态更新页面的情况下，浏览器只能回退到前一个静态页面
	- 解决方法：
		- 待补充

- 网络延迟
	- 解决方案：
		- 待补充

###### Ajax卡法中要遇到的问题
- 浏览器兼容
- 客户端与服务端数据交换
- 胖客户端架构
- 瘦客户端架构
- 向服务端发送多个异步请求的时候，无法确定哪一个请求先获得对应的响应，导致了线程内资源之间的竞争问题
	- zk框架


## 兼容性